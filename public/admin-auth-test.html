<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Admin Authentication Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a !important; }
    </style>
</head>
<body class="min-h-screen bg-neutral-900 text-white p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-orange-400 mb-8">Admin Authentication Test</h1>
        
        <div class="grid gap-6 md:grid-cols-2">
            <!-- Current Auth Status -->
            <div class="bg-neutral-800 p-6 rounded-lg border border-neutral-700">
                <h2 class="text-xl font-bold text-white mb-4">Current Authentication Status</h2>
                <div id="authStatus" class="space-y-2">
                    <!-- Will be populated by JavaScript -->
                </div>
                <button onclick="refreshStatus()" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition-colors">
                    üîÑ Refresh Status
                </button>
            </div>
            
            <!-- Test Actions -->
            <div class="bg-neutral-800 p-6 rounded-lg border border-neutral-700">
                <h2 class="text-xl font-bold text-white mb-4">Test Actions</h2>
                <div class="space-y-3">
                    <button onclick="testLogin()" class="w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded transition-colors">
                        üîê Test Login (admin2025)
                    </button>
                    <button onclick="testLogout()" class="w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded transition-colors">
                        üö™ Test Logout
                    </button>
                    <button onclick="testExpiry()" class="w-full bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded transition-colors">
                        ‚è∞ Test Session Expiry
                    </button>
                </div>
            </div>
            
            <!-- Navigation Links -->
            <div class="bg-neutral-800 p-6 rounded-lg border border-neutral-700">
                <h2 class="text-xl font-bold text-white mb-4">Test Navigation</h2>
                <div class="space-y-2">
                    <a href="/admin/" class="block bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded transition-colors text-center">
                        üìä Test Admin Dashboard
                    </a>
                    <a href="/admin-secure.html" class="block bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded transition-colors text-center">
                        üîí Test Secure Admin
                    </a>
                    <a href="/" class="block bg-neutral-600 hover:bg-neutral-700 text-white px-4 py-2 rounded transition-colors text-center">
                        üè† Back to Home (Test Admin Menu)
                    </a>
                </div>
            </div>
            
            <!-- Test Results -->
            <div class="bg-neutral-800 p-6 rounded-lg border border-neutral-700">
                <h2 class="text-xl font-bold text-white mb-4">Test Results</h2>
                <div id="testResults" class="space-y-2 text-sm">
                    <p class="text-neutral-400">Run tests to see results here...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function refreshStatus() {
            const authToken = localStorage.getItem('admin_auth_token');
            const authTime = localStorage.getItem('admin_auth_time');
            const statusDiv = document.getElementById('authStatus');
            
            let statusHTML = '';
            
            if (authToken && authTime) {
                const now = new Date().getTime();
                const authAge = now - parseInt(authTime);
                const twentyFourHours = 24 * 60 * 60 * 1000;
                const remainingTime = twentyFourHours - authAge;
                
                if (authAge < twentyFourHours) {
                    const hoursLeft = Math.floor(remainingTime / (60 * 60 * 1000));
                    const minutesLeft = Math.floor((remainingTime % (60 * 60 * 1000)) / (60 * 1000));
                    
                    statusHTML = `
                        <div class="flex items-center gap-2">
                            <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                            <span class="text-green-300 font-medium">Authenticated</span>
                        </div>
                        <p class="text-neutral-300">Token: ${authToken.substring(0, 20)}...</p>
                        <p class="text-neutral-300">Session expires in: ${hoursLeft}h ${minutesLeft}m</p>
                        <p class="text-xs text-neutral-400">Created: ${new Date(parseInt(authTime)).toLocaleString()}</p>
                    `;
                } else {
                    statusHTML = `
                        <div class="flex items-center gap-2">
                            <span class="w-3 h-3 bg-red-500 rounded-full"></span>
                            <span class="text-red-300 font-medium">Session Expired</span>
                        </div>
                        <p class="text-neutral-300">Token exists but expired</p>
                        <p class="text-xs text-neutral-400">Expired: ${new Date(parseInt(authTime) + twentyFourHours).toLocaleString()}</p>
                    `;
                }
            } else {
                statusHTML = `
                    <div class="flex items-center gap-2">
                        <span class="w-3 h-3 bg-gray-500 rounded-full"></span>
                        <span class="text-gray-300 font-medium">Not Authenticated</span>
                    </div>
                    <p class="text-neutral-400">No authentication token found</p>
                `;
            }
            
            statusDiv.innerHTML = statusHTML;
        }
        
        function testLogin() {
            const authToken = generateAuthToken();
            localStorage.setItem('admin_auth_token', authToken);
            localStorage.setItem('admin_auth_time', new Date().getTime().toString());
            
            addTestResult('‚úÖ Login Test', 'Successfully created authentication token', 'success');
            refreshStatus();
        }
        
        function testLogout() {
            localStorage.removeItem('admin_auth_token');
            localStorage.removeItem('admin_auth_time');
            
            addTestResult('‚úÖ Logout Test', 'Successfully cleared authentication tokens', 'success');
            refreshStatus();
        }
        
        function testExpiry() {
            // Set an expired token (25 hours ago)
            const expiredTime = new Date().getTime() - (25 * 60 * 60 * 1000);
            const authToken = generateAuthToken();
            localStorage.setItem('admin_auth_token', authToken);
            localStorage.setItem('admin_auth_time', expiredTime.toString());
            
            addTestResult('‚úÖ Expiry Test', 'Created expired token (25 hours old)', 'warning');
            refreshStatus();
        }
        
        function generateAuthToken() {
            const timestamp = new Date().getTime();
            const random = Math.random().toString(36).substring(2);
            return btoa(`${timestamp}-${random}`);
        }
        
        function addTestResult(title, message, type) {
            const resultsDiv = document.getElementById('testResults');
            const colorClass = type === 'success' ? 'text-green-300' : 
                              type === 'warning' ? 'text-yellow-300' : 'text-red-300';
            
            const resultHTML = `
                <div class="p-3 bg-neutral-700 rounded border-l-4 ${type === 'success' ? 'border-green-500' : 
                    type === 'warning' ? 'border-yellow-500' : 'border-red-500'}">
                    <p class="${colorClass} font-medium">${title}</p>
                    <p class="text-neutral-300 text-xs">${message}</p>
                    <p class="text-neutral-400 text-xs">${new Date().toLocaleTimeString()}</p>
                </div>
            `;
            
            resultsDiv.insertAdjacentHTML('afterbegin', resultHTML);
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', refreshStatus);
    </script>
</body>
</html>
</content>