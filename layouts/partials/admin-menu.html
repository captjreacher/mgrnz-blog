<!-- Secure Admin Menu -->
<div class="relative inline-block text-left" id="adminMenuContainer">
  <button onclick="checkAdminAccess()" class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-neutral-700 text-neutral-300 hover:bg-neutral-600 hover:text-white transition-colors" title="Admin Access">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
    </svg>
  </button>
  
  <div id="adminDropdown" class="hidden absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-neutral-800 border border-neutral-700 z-50">
    <div class="py-2">
      <div class="px-4 py-2 text-xs text-neutral-400 border-b border-neutral-700">
        ğŸ” Secure Admin Access
      </div>
      <a href="/admin/" class="block px-4 py-2 text-sm text-neutral-300 hover:bg-neutral-700 hover:text-white transition-colors">
        ğŸ“Š Dashboard
      </a>
      <a href="/admin/posts/" class="block px-4 py-2 text-sm text-neutral-300 hover:bg-neutral-700 hover:text-white transition-colors">
        ğŸ“ Manage Posts
      </a>
      <a href="/admin/create/" class="block px-4 py-2 text-sm text-neutral-300 hover:bg-neutral-700 hover:text-white transition-colors">
        âœï¸ Create Post
      </a>
      <a href="/admin-edit-v2-fixed.html" class="block px-4 py-2 text-sm text-neutral-300 hover:bg-neutral-700 hover:text-white transition-colors">
        ğŸ”§ Edit Posts
      </a>
      <div class="border-t border-neutral-700 mt-2 pt-2">
        <a href="/admin-simple.html" class="block px-4 py-2 text-sm text-green-400 hover:bg-green-900/20 transition-colors">
          ğŸš€ Quick Access
        </a>
        <button onclick="logoutAdmin()" class="block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-red-900/20 transition-colors">
          ğŸšª Logout
        </button>
      </div>
    </div>
  </div>
</div>

<script>
function checkAdminAccess() {
  const authToken = localStorage.getItem('admin_auth_token');
  const authTime = localStorage.getItem('admin_auth_time');
  
  if (authToken && authTime) {
    const now = new Date().getTime();
    const authAge = now - parseInt(authTime);
    const twentyFourHours = 24 * 60 * 60 * 1000;
    
    if (authAge < twentyFourHours) {
      // User is authenticated, show menu
      toggleAdminMenu();
      return;
    } else {
      // Session expired, clear tokens
      localStorage.removeItem('admin_auth_token');
      localStorage.removeItem('admin_auth_time');
    }
  }
  
  // User not authenticated, redirect to admin login
  window.location.href = '/admin/';
}

function toggleAdminMenu() {
  const dropdown = document.getElementById('adminDropdown');
  dropdown.classList.toggle('hidden');
}

function logoutAdmin() {
  if (confirm('Are you sure you want to logout?')) {
    localStorage.removeItem('admin_auth_token');
    localStorage.removeItem('admin_auth_time');
    // Hide the dropdown
    document.getElementById('adminDropdown').classList.add('hidden');
    // Show confirmation
    alert('âœ… Logged out successfully');
  }
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
  const dropdown = document.getElementById('adminDropdown');
  const button = event.target.closest('button[onclick="checkAdminAccess()"]');
  
  if (!button && !dropdown.contains(event.target)) {
    dropdown.classList.add('hidden');
  }
});
</script>