{{ define "main" }}
<section style="max-width:800px;margin:auto;color:#fff;">
  <h1 style="color:#ff4f00;">Create New Post</h1>
  <form id="post-form" style="display:flex;flex-direction:column;gap:1rem;margin-top:1.5rem;">
    <label>Post Name (short): <input type="text" id="slug" style="width:100%;padding:.5rem;border-radius:6px;"></label>
    <label>Post Title: <input type="text" id="title" style="width:100%;padding:.5rem;border-radius:6px;"></label>
    <label>Category / Tag: <input type="text" id="category" style="width:100%;padding:.5rem;border-radius:6px;"></label>
    <label>Excerpt: <textarea id="excerpt" rows="3" style="width:100%;padding:.5rem;border-radius:6px;"></textarea></label>
    <label>Body Content: <textarea id="body" rows="8" style="width:100%;padding:.5rem;border-radius:6px;"></textarea></label>
    <label>Image URL (optional): <input type="text" id="image" style="width:100%;padding:.5rem;border-radius:6px;"></label>
    <label><input type="checkbox" id="comments"> Enable comments</label>
    <button type="button" id="generate" style="background:#ff4f00;color:#fff;padding:.75rem;border:none;border-radius:8px;">Generate Markdown</button>
  </form>

  <pre id="output" style="background:#111;color:#0f0;padding:1rem;border-radius:8px;margin-top:2rem;white-space:pre-wrap;"></pre>

  <script>
  document.getElementById('generate').onclick = () => {
    const slug = document.getElementById('slug').value.trim() || 'new-post';
    const title = document.getElementById('title').value.trim();
    const cat = document.getElementById('category').value.trim();
    const excerpt = document.getElementById('excerpt').value.trim();
    const body = document.getElementById('body').value.trim();
    const image = document.getElementById('image').value.trim();
    const comments = document.getElementById('comments').checked ? 'true' : 'false';
    const date = new Date().toISOString().slice(0,10);

    const md = `---\ntitle: "${title}"\ndate: ${date}\ntags: ["${cat}"]\ndraft: false\ncomments: ${comments}\nimage: "${image}"\nsummary: "${excerpt}"\n---\n\n${body}`;
    document.getElementById('output').textContent = md;
  };
  </script>
</section>
{{ end }}


